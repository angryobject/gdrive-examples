<!DOCTYPE html>
<html>
<head>
    <title>Google Drive Examples - Files Explorer</title>
    <style>
        label {
            display: block;
            padding: 5px;
            margin: 10px;
        }
        input, textarea, select {
            display: block;
        }
        input[type="text"], textarea {
            width: 350px;
            max-width: 100%;
        }
        textarea {
            min-height: 100px;
        }
    </style>
</head>
<body>

    <h1>Files Explorer</h1>

    <h2>Create/Update a file</h2>

    <form id="form-create" action="/drive" method="POST">
        <label>
            File Name:
            <input type="text" name="fileName" value="My file.txt">
        </label>
        <label>
            File Contents:
            <textarea name="fileContent">Put in some text!</textarea>
        </label>
        <label>
            File ID (to update a file):
            <input type="text" name="fileId">
        </label>
        <input type="submit" name="createFile" value="Create/Update a file on my Drive!">
    </form>

    <h2>List files</h2>

    <a href="/drive">List created files on my Drive!</a>

    <h2>Get file by ID</h2>

    <form id="form-get" action="/drive" method="GET">
        <label>
            File ID:
            <input type="text" name="fileId">
        </label>
        <input type="submit" name="getFile" value="Get a file on my Drive!">
    </form>

    <h2>Download file by ID</h2>

    <form id="form-download" action="/download" method="GET">
        <label>
            File ID:
            <input type="text" name="fileId">
        </label>
        <input type="submit" name="downloadFile" value="Download a file on my Drive!">
    </form>

    <h2>Share file by ID</h2>

    <form id="form-share" action="/share" method="GET">
        <label>
            File ID:
            <input type="text" name="fileId">
        </label>
        <label>
            Type:
            <select name="type">
                <option value="user">user</option>
                <option value="group">group</option>
                <option value="domain">domain</option>
                <option value="anyone">anyone</option>
            </select>
        </label>
        <label>
            Role:
            <select name="role">
                <option value="reader">reader</option>
                <option value="writer">writer</option>
                <option value="owner">owner</option>
            </select>
        </label>
        <label>
            Value(email/group email/blank for anyone):
            <input type="text" name="value">
        </label>
        <input type="submit" name="shareFile" value="Share a file on my Drive!">
    </form>

    <h2>Trash/Untrash/Delete file by ID</h2>

    <form id="form-remove" action="/drive" method="POST">
        <label>
            File ID:
            <input type="text" name="fileId">
        </label>
        <label>
            Action:
            <select name="action">
                <option value="trash">trash</option>
                <option value="untrash">untrash</option>
                <option value="erase">erase</option>
            </select>
        </label>
        <input type="submit" name="removeFile" value="Remove a file on my Drive!">
    </form>

    <h2>Add custom properties to a file</h2>

    <form id="form-properties" action="/properties" method="POST">
        <label>
            File ID:
            <input type="text" name="fileId">
        </label>
        <label>
            Key:
            <input type="text" name="key">
        </label>
        <label>
            Value:
            <input type="text" name="value">
        </label>
        <input type="submit" name="addProperty" value="Add custom ptoperty">
    </form>

    <h2>List custom properties on a file</h2>

    <form id="form-properties" action="/properties" method="GET">
        <label>
            File ID:
            <input type="text" name="fileId">
        </label>
        <input type="submit" name="listProperties" value="List custom ptoperties">
    </form>

    <h2>Create Folder</h2>

    <form id="form-createFolder" action="/drive" method="POST">
        <label>
            Name:
            <input type="text" name="fileName" value="My folder">
        </label>
        <input type="submit" name="createFolder" value="Create folder">
    </form>

    <h2>Move file to folder</h2>

    <form id="form-moveFileToFolder" action="/folder" method="POST">
        <label>
            File Id:
            <input type="text" name="fileId">
        </label>
        <label>
            Folder Id:
            <input type="text" name="folderId">
        </label>
        <input type="submit" name="moveFileToFolder" value="Move">
    </form>
    <p>P.S. To save a new file into a folder just set its parents property. Same works when you need to create subfolders - just specify its parents. Remember, folders are just regular files.</p>

    <h2>List contents of a folder</h2>

    <form id="form-properties" action="/folder" method="GET">
        <label>
            Folder ID:
            <input type="text" name="folderId">
        </label>
        <input type="submit" name="listFolder" value="Get files in folder">
    </form>

    <h2>List folders</h2>

    <a href="/folder">List folders</a>

    <h2>On storing app-specific data</h2>

    <p>If you want to store app-cpecific data that the user should not see (or rather you don't want them mess around on users drive) you should request access to scope 'https://www.googleapis.com/auth/drive.appdata' and srote your files in folder with the id of 'appdata', e.g. parents: [{id: 'appdata'}].</p>

    <p>Accessing this appdata folder by its alias is slower than by the actual id, so you might want to get its full metadat once, e.g. gdrive.get(auth, 'appdata', cb), then store its actual id and use that in subsequent requests.</p>

    <h2>Watching files</h2>

    <p>You can subscribe to push-notifications when a file changes. Read more about it <a href="https://developers.google.com/drive/v2/reference/changes/watch">here</a>. It requires some more steps like registering your domain on google webmasters panel, creating a new notification endpoint in gdc. As i understand, you can't do on the localhost.</p>

    <h2>Installing your app</h2>

    <p>Also, you can install your app on user's drive, so that they can open files with it. Your app will be displayed in 'open with' menu, and inside create new file dialog. You'll need a new permission 'https://www.googleapis.com/auth/drive.install'. Basically you should configure 'Open URL' option for the Drive SDK in your GDC. Whenever users open a file, they'll be redirected to this url. Some parameters will be passed along (like file id), the reset is your job =).</p>

</body>
</html>
